<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>hddtools: Hydrological Data Discovery Tools • hddtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="hddtools: Hydrological Data Discovery Tools">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hddtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://joss.theoj.org/papers/3287a12e7ce5d7e89938a6b4f56fc225">JOSS paper</a>
    </li>
    <li>
      <a href="http://adsabs.harvard.edu/abs/2014AGUFM.H13H1209V">Abstract/Poster presented at AGU 2014</a>
    </li>
    <li>
      <a href="../articles/index.html">Vignette</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/hddtools/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>hddtools: Hydrological Data Discovery Tools</h1>
                        <h4 class="author">Claudia Vitolo</h4>
            
            <h4 class="date">2019-12-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/hddtools/blob/master/vignettes/hddtools_vignette.Rmd"><code>vignettes/hddtools_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>hddtools_vignette.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><strong>hddtools</strong> stands for Hydrological Data Discovery Tools. This R package is an open source project designed to facilitate access to a variety of online open data sources relevant for hydrologists and, in general, environmental scientists and practitioners.</p>
<p>This typically implies the download of a metadata catalogue, selection of information needed, formal request for dataset(s), de-compression, conversion, manual filtering and parsing. All those operation are made more efficient by re-usable functions.</p>
<p>Depending on the data license, functions can provide offline and/or online modes. When redistribution is allowed, for instance, a copy of the dataset is cached within the package and updated twice a year. This is the fastest option and also allows offline use of package’s functions. When re-distribution is not allowed, only online mode is provided.</p>
<div id="dependencies-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies-installation" class="anchor"></a>Dependencies &amp; Installation</h2>
<p>The hddtools package and the examples in this vignette depend on other CRAN packages. Check for missing dependencies and install them using the commands below:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">packs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"zoo"</span>, <span class="st">"sp"</span>, <span class="st">"RCurl"</span>, <span class="st">"XML"</span>, <span class="st">"rnrfa"</span>, <span class="st">"Hmisc"</span>, <span class="st">"raster"</span>, </a>
<a class="sourceLine" id="cb1-2" data-line-number="2">           <span class="st">"stringr"</span>, <span class="st">"devtools"</span>, <span class="st">"leaflet"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">new_packages &lt;-<span class="st"> </span>packs[<span class="op">!</span>(packs <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span>()[,<span class="st">"Package"</span>])]</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="cf">if</span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(new_packages)) <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(new_packages)</a></code></pre></div>
<p>Get the released version from CRAN:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"hddtools"</span>)</a></code></pre></div>
<p>Or the development version from github using <a href="https://github.com/hadley/devtools">devtools</a>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"ropensci/hddtools"</span>)</a></code></pre></div>
<p>Load the hddtools package:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"hddtools"</span>)</a></code></pre></div>
</div>
<div id="data-sources-and-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#data-sources-and-functions" class="anchor"></a>Data sources and Functions</h2>
<p>The functions provided can filter, slice and dice 2 and 3 dimensional information.</p>
<div id="the-koppen-climate-classification-map" class="section level3">
<h3 class="hasAnchor">
<a href="#the-koppen-climate-classification-map" class="anchor"></a>The Koppen Climate Classification map</h3>
<p>The Koppen Climate Classification is the most widely used system for classifying the world’s climates. Its categories are based on the annual and monthly averages of temperature and precipitation. It was first updated by Rudolf Geiger in 1961, then by Kottek et al. (2006), Peel et al. (2007) and then by Rubel et al. (2010).</p>
<p>The package hddtools contains a function to identify the updated Koppen-Greiger climate zone, given a bounding box.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Define a bounding box</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">areaBox &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">48</span>, <span class="dv">62</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co"># Extract climate zones from Peel's map:</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw"><a href="../reference/KGClimateClass.html">KGClimateClass</a></span>(<span class="dt">areaBox =</span> areaBox, <span class="dt">updatedBy =</span> <span class="st">"Peel"</span>)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;   ID Class Frequency</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 1  9   Csb         1</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 2 15   Cfb      6199</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 3 16   Cfc        10</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 4 27   Dfc         3</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 5 29    ET         1</span></a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Extract climate zones from Kottek's map:</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="../reference/KGClimateClass.html">KGClimateClass</a></span>(<span class="dt">areaBox =</span> areaBox, <span class="dt">updatedBy =</span> <span class="st">"Kottek"</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;   ID Class Frequency</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; 1 32   Cfb     12301</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 2 33   Cfc       507</span></a></code></pre></div>
</div>
<div id="the-global-runoff-data-centre" class="section level3">
<h3 class="hasAnchor">
<a href="#the-global-runoff-data-centre" class="anchor"></a>The Global Runoff Data Centre</h3>
<p>The Global Runoff Data Centre (GRDC) is an international archive hosted by the Federal Institute of Hydrology in Koblenz, Germany. The Centre operates under the auspices of the World Meteorological Organisation and retains services and datasets for all the major rivers in the world. Catalogue, kml files and the product Long-Term Mean Monthly Discharges are open data and accessible via the hddtools.</p>
<p>Information on all the GRDC stations can be retrieved using the function <code>catalogueGRDC</code> with no input arguments, as in the examle below:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># GRDC full catalogue</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">GRDC_catalogue_all &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueGRDC.html">catalogueGRDC</a></span>()</a></code></pre></div>
<p>However, there are a number of options to filter the catalogue and return only the a subset of stations. For instance, we might be interested in subsetting only stations in Italy. As the 8th column in the catalogue lists the country codes, we can filter the catalogue passing two input arguments to the <code>catalogueGRDC</code> function: <code>columnName = "country_code"</code> and <code>columnValue  = "IT"</code>, as in the example below.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Filter GRDC catalogue based on a country code</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">GRDC_catalogue_countrycode &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueGRDC.html">catalogueGRDC</a></span>(<span class="dt">columnName =</span> <span class="st">"country_code"</span>,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">                                            <span class="dt">columnValue =</span> <span class="st">"IT"</span>)</a></code></pre></div>
<p>The arguments <code>columnName</code> and <code>columnValue</code> can be used to filter over other columns. For instance, in the example below we show how to subset stations along the Po River.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Filter GRDC catalogue based on rivername</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">GRDC_catalogue_river &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueGRDC.html">catalogueGRDC</a></span>(<span class="dt">columnName =</span> <span class="st">"river"</span>, <span class="dt">columnValue =</span> <span class="st">"PO"</span>)</a></code></pre></div>
<p>Note in the example above that the search is not case sensitive, therefore you get the same result whether the columnValue is spelled “PO”, “Po” or “po”. Same applies for the metadata column (it can be spelled “RIVER”, “river”, “River”…).</p>
<p>If <code>columnName</code> refers to a numeric field, in the <code>columnValue</code> we can specify other terms of comparison. For example we can select all the stations for which daily data is available since 2000.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># Filter GRDC catalogue based on numerical value, for instance select all the stations for which daily data is available since 2000</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">GRDC_catalogue_dstart &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueGRDC.html">catalogueGRDC</a></span>(<span class="dt">columnName =</span> <span class="st">"d_start"</span>, </a>
<a class="sourceLine" id="cb10-3" data-line-number="3">                                       <span class="dt">columnValue =</span> <span class="st">"&gt;=2000"</span>)</a></code></pre></div>
<p>Another option is to filter the catalogue based on a geographical bounding box.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Define a bounding box</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">areaBox &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">48</span>, <span class="dv">62</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co"># Filter GRDC catalogue based on a bounding box</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">GRDC_catalogue_bbox &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueGRDC.html">catalogueGRDC</a></span>(<span class="dt">areaBox =</span> areaBox)</a></code></pre></div>
<p>The filters can be also combined, as in the examples below.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># Define a bounding box</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">areaBox &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">48</span>, <span class="dv">62</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co"># Filter GRDC catalogue based on a bounding box plus keep only those stations where "statistics" value is 1</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5">GRDC_catalogue_bbox_stats &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueGRDC.html">catalogueGRDC</a></span>(<span class="dt">areaBox =</span> areaBox, </a>
<a class="sourceLine" id="cb12-6" data-line-number="6">                                           <span class="dt">columnName =</span> <span class="st">"statistics"</span>,</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">                                           <span class="dt">columnValue =</span> <span class="dv">1</span>)</a></code></pre></div>
<p>The filtered stations can be used to create a map.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Visualise outlets on an interactive map</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(leaflet)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>(<span class="dt">data =</span> GRDC_catalogue_bbox_stats) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span>() <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># Add default OpenStreetMap map tiles</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addMarkers</a></span>(<span class="op">~</span>long, <span class="op">~</span>lat, <span class="dt">popup =</span> <span class="op">~</span>station)</a></code></pre></div>
<p><img src="leaflet.png"></p>
<p>Lastly, given a station ID number (this is stored in the column grdc_no of the catalogue) we can check whether monthly data is available and eventually plot it.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># Monthly data extraction</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">WolfeToneBridge &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsGRDC.html">tsGRDC</a></span>(<span class="dt">stationID =</span> <span class="kw"><a href="../reference/catalogueGRDC.html">catalogueGRDC</a></span>()<span class="op">$</span>grdc_no[<span class="dv">7126</span>],</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">                          <span class="dt">plotOption =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="tsGRDC.png"></p>
</div>
<div id="top-down-modelling-working-group-data60uk-and-mopex" class="section level3">
<h3 class="hasAnchor">
<a href="#top-down-modelling-working-group-data60uk-and-mopex" class="anchor"></a>Top-Down modelling Working Group (Data60UK and MOPEX)</h3>
<p>The Top-Down modelling Working Group (TDWG) for the Prediction in Ungauged Basins (PUB) Decade (2003-2012) is an initiative of the International Association of Hydrological Sciences (IAHS) which collected datasets for hydrological modelling free-of-charge, available <a href="http://tdwg.catchment.org/datasets.html">here</a>. This package provides a common interface to retrieve, browse and filter information.</p>
<div id="the-data60uk-dataset" class="section level4">
<h4 class="hasAnchor">
<a href="#the-data60uk-dataset" class="anchor"></a>The Data60UK dataset</h4>
<p>The Data60UK initiative collated datasets of areal precipitation and streamflow discharge across 61 gauging sites in England and Wales (UK). The database was prepared from source databases for research purposes, with the intention to make it re-usable. This is now available in the public domain free of charge.</p>
<p>The hddtools contain two functions to interact with this database: one to retreive the catalogue and another to retreive time series of areal precipitation and streamflow discharge.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Data60UK full catalogue</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">Data60UK_catalogue_all &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueData60UK.html">catalogueData60UK</a></span>()</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co"># Filter Data60UK catalogue based on bounding box</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">areaBox &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="op">-</span><span class="dv">4</span>, <span class="dv">-3</span>, <span class="dv">51</span>, <span class="dv">53</span>)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">Data60UK_catalogue_bbox &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueData60UK.html">catalogueData60UK</a></span>(<span class="dt">areaBox =</span> areaBox)</a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># Visualise outlets on an interactive map</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(leaflet)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>(<span class="dt">data =</span> Data60UK_catalogue_bbox) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span>() <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># Add default OpenStreetMap map tiles</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addMarkers</a></span>(<span class="op">~</span>Longitude, <span class="op">~</span>Latitude, <span class="dt">popup =</span> <span class="op">~</span>Location)</a></code></pre></div>
<p><img src="leaflet2.png"></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># Extract time series </span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">stationID &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueData60UK.html">catalogueData60UK</a></span>()<span class="op">$</span>stationID[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co"># Extract only the time series</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5">MorwickTS &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsData60UK.html">tsData60UK</a></span>(stationID, <span class="dt">plotOption =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co"># Extract time series for a specified temporal window</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8">twindow &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"1988-01-01"</span>), <span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"1989-12-31"</span>), <span class="dt">by =</span> <span class="st">"days"</span>)</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">MorwickTSplot &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsData60UK.html">tsData60UK</a></span>(<span class="dt">stationID =</span> stationID, </a>
<a class="sourceLine" id="cb17-10" data-line-number="10">                            <span class="dt">plotOption =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">                            <span class="dt">twindow =</span> twindow)</a></code></pre></div>
<p><img src="hddtools_vignette_files/figure-html/catalogueData60UK3-1.png" width="672"></p>
</div>
<div id="mopex" class="section level4">
<h4 class="hasAnchor">
<a href="#mopex" class="anchor"></a>MOPEX</h4>
<p>Dataset containing historical hydrometeorological data and river basin characteristics for hundreds of river basins from a range of climates in the US.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># MOPEX full catalogue</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">MOPEX_catalogue_all &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueMOPEX.html">catalogueMOPEX</a></span>()</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co"># Extract time series </span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5">BroadRiver &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsMOPEX.html">tsMOPEX</a></span>(<span class="dt">stationID =</span> MOPEX_catalogue_all<span class="op">$</span>stationID[<span class="dv">1</span>], </a>
<a class="sourceLine" id="cb18-6" data-line-number="6">                      <span class="dt">plotOption =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="hddtools_vignette_files/figure-html/MOPEX-1.png" width="672"></p>
</div>
</div>
<div id="sepa-river-level-data" class="section level3">
<h3 class="hasAnchor">
<a href="#sepa-river-level-data" class="anchor"></a>SEPA river level data</h3>
<p>The Scottish Environment Protection Agency (SEPA) manages river level data for hundreds of gauging stations in the UK. The catalogue of stations is derived from the list here: <a href="http://apps.sepa.org.uk/database/riverlevels/SEPA_River_Levels_Web.csv" class="uri">http://apps.sepa.org.uk/database/riverlevels/SEPA_River_Levels_Web.csv</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># SEPA unofficial catalogue</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">SEPA_catalogue_all &lt;-<span class="st"> </span><span class="kw"><a href="../reference/catalogueSEPA.html">catalogueSEPA</a></span>()</a></code></pre></div>
<p>The time series of the last few days is available from SEPA website and can be downloaded using the following function:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># Single time series extraction</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">Perth &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsSEPA.html">tsSEPA</a></span>(<span class="dt">stationID =</span> <span class="kw"><a href="../reference/catalogueSEPA.html">catalogueSEPA</a></span>()<span class="op">$</span>LOCATION_CODE[<span class="dv">1</span>], <span class="dt">plotOption =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="hddtools_vignette_files/figure-html/SEPA2-1.png" width="672"></p>
<p>Plese note that these data are updated every 15 minutes and the code will always generate different plots.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Multiple time series extraction</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsSEPA.html">tsSEPA</a></span>(<span class="dt">stationID =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"234253"</span>, <span class="st">"234174"</span>, <span class="st">"234305"</span>))</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(y[[<span class="dv">1</span>]], <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(y[[<span class="dv">1</span>]], y[[<span class="dv">2</span>]], y[[<span class="dv">3</span>]])), </a>
<a class="sourceLine" id="cb21-4" data-line-number="4">     <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">ylab =</span> <span class="st">"Water level [m]"</span>)</a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span>(y[[<span class="dv">2</span>]], <span class="dt">col =</span> <span class="st">"red"</span>)</a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span>(y[[<span class="dv">3</span>]], <span class="dt">col =</span> <span class="st">"blue"</span>)</a></code></pre></div>
<p><img src="hddtools_vignette_files/figure-html/SEPA3-1.png" width="672"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#introduction">Introduction</a><ul class="nav nav-pills nav-stacked">
<li><a href="#dependencies-installation">Dependencies &amp; Installation</a></li>
      <li><a href="#data-sources-and-functions">Data sources and Functions</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Claudia Vitolo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
